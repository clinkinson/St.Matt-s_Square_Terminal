<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barista Display</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body class="bg-zinc-900 p-6 text-white">
<h1 class="text-3xl font-bold mb-6 border-b border-zinc-700 pb-4">Incoming Drink Orders</h1>

<div id="order-grid" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6">
</div>

<script>
    const socket = io();

    socket.on('order-update', (data) => {
        renderOrders(data.orders);
    });

    socket.on('init-data', (data) => {
        renderOrders(data.orders);
    });

    function renderOrders(orders) {
        const grid = document.getElementById('order-grid');
        grid.innerHTML = orders.map(order => `
                <div class="bg-zinc-800 border-2 border-orange-500 rounded-lg p-4 flex flex-col h-full shadow-xl">
                    <div class="text-orange-500 text-xs font-mono uppercase tracking-widest">Order #${order.id.toString().slice(-4)}</div>
                    <button onclick="completeOrder(${order.id})" class="mt-4 bg-orange-600 hover:bg-orange-500 text-white font-bold py-3 rounded-md transition">
                        COMPLETE
                    </button>
                    <div class="flex-grow overflow-y-auto mt-4">
                        ${order.items.map(item => `<div class="text-lg font-bold mb-1">â€¢ ${item}</div>`).join('')}
                    </div>
                </div>
            `).join('');
    }

    function completeOrder(id) {
        socket.emit('complete-order', id);
    }
</script>
</body>
</html>